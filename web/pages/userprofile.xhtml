<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/layout/template.xhtml">
        <ui:define name="page_title">
            User Detail
        </ui:define>
        <ui:define name="layout_content">
            <p:layoutUnit id="pnlCenter" position="center">
                <h:form id="form_main"> 
                    <div>
                        <p:messages id="pmessages" showDetail="true" showSummary="false"  closable="true" /> 
                    </div>
                    <div>
                        <p:panel id="pnlCommand"  >
                            <div >
                                <!--<p:autoComplete value="#{profile.mlistUser}"-->
                            </div>
                            
                            <div style="text-align: right">
                                <p:commandButton id="btnSave" process="@this,pnlAdd"  value="Ghi "  icon="ui-icon-disk"  
                                                 actionListener="#{profile.saveUser}" />               
                            </div>
                        </p:panel>
                        <p:panel id="pnlAdd" header="User Profile" >
                            <p:panelGrid  style="width: 100%">
                                <p:row>
                                    <p:column style="width: 15%;">
                                        <p:outputLabel value="Tên ĐN" for="txtUserName"/>
                                    </p:column>
                                    <p:column style="width: 85%;">
                                        <p:inputText id="txtUserName" value="#{profile.mloggedUser.username}" 
                                                     required="true" requiredMessage="Nhập Tên ĐN"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="width: 15%;">
                                        <p:outputLabel value="Họ tên " for="txtFullName"/>
                                    </p:column>
                                    <p:column style="width: 85%;">
                                        <p:inputText id="txtFullName" value="#{profile.mloggedUser.fullname}" 
                                                     required="true" requiredMessage="Nhập họ tên"/>
                                    </p:column>
                                </p:row>
                                <!--                                <p:row>
                                                                    <p:column style="width: 15%;">
                                                                        <p:outputLabel value="Ngày sinh" for="calBirthDay"/>
                                                                    </p:column>
                                                                    <p:column style="width: 85%;">
                                                                        <p:calendar  pattern="dd/MM/yyyy" value="#{profile.mloggeduser.birthDay}"
                                                                                     id="calBirthDay" styleClass="hasDatepicker" mode="popup" navigator="true"
                                                                                     required="true" requiredMessage="Nhập ngày sinh">
                                                                            <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT+7" />
                                                                        </p:calendar>
                                                                    </p:column>
                                                                </p:row>-->
                                <p:row>
                                    <p:column style="width: 15%;">
                                        <p:outputLabel value="Email " for="txtEmail"/>
                                    </p:column>
                                    <p:column style="width: 85%;">
                                        <p:inputText id="txtEmail" value="#{profile.mloggedUser.email}" 
                                                     required="true" requiredMessage="Nhập Email"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="width: 15%;">
                                        <p:outputLabel value="Phone " for="txtPhone"/>
                                    </p:column>
                                    <p:column style="width: 85%;">
                                        <p:inputText id="txtPhone" value="#{profile.mloggedUser.phone}" 
                                                     required="true" requiredMessage="Nhập số điện thoại"/>
                                    </p:column>
                                </p:row>
                                <!--                                <p:row>
                                                                    <p:column style="width: 15%;">
                                                                        <p:outputLabel value="Trạng thái" for="sobStatus"/>
                                                                    </p:column>
                                                                    <p:column style="width: 85%;">
                                                                        <p:selectOneButton id="sobStatus" value="#{profile.mloggedUser.phone}">
                                                                            <f:selectItem itemLabel="Active" itemValue="1" />  
                                                                            <f:selectItem itemLabel="Passive" itemValue="0" />  
                                                                        </p:selectOneButton>
                                                                    </p:column>
                                                                </p:row>-->
                            </p:panelGrid>
                        </p:panel>
                    </div>
                    <!--                    <p:confirmDialog message="Bạn có muốn xóa dữ liệu?" header="Xóa dữ liệu" appendTo="@(body)" id="cfmDelete" 
                                                         severity="alert"
                                                         widgetVar="cfmDelete">
                                            <p:commandButton value="Có "  process="@this"  actionListener="" 
                                                             update="pnlList,pmessages" 
                                                             oncomplete="cfmDelete.hide();"/>
                                            <p:commandButton value="Không " onclick="cfmDelete.hide();" type="button" />
                                        </p:confirmDialog>
                                        <p:confirmDialog message="Bạn có muốn xóa dữ liệu?" header="Xóa dữ liệu" appendTo="@(body)" id="cfmDeleteN" 
                                                         severity="alert"
                                                         widgetVar="cfmDeleteN">
                                            <p:commandButton value="Có "  process="@this"  actionListener="" 
                                                             update="pnlList,pmessages,pnlCommand" 
                                                             oncomplete="cfmDeleteN.hide();"/>
                                            <p:commandButton value="Không " onclick="cfmDeleteN.hide();" type="button" />
                                        </p:confirmDialog>-->
                    <p:dataTable id="allUser" var="userAvailable" value="#{profile.mlistUser}" paginator="true" paginatorPosition="bottom">
                        <p:column>
                            <h:outputText value="#{userAvailable.username}"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{userAvailable.email}"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{userAvailable.phone}"/>
                        </p:column>
                        <p:column>
                            <p:commandLink id="cmdAdd" process="@this" actionListener="#{profile.addFriend(userAvailable)}" rendered="#{userAvailable
                                                                                          .friendStatus eq 0}"
                                                                                          update="allUser">
                                Add Friend
                            </p:commandLink>
                            <p:commandLink id="cmdAccept" process="@this" actionListener="#{profile.updateFriendStatus(userAvailable, 1)}" rendered="#{userAvailable
                                                                                          .friendStatus eq 2}"
                                                                                          update="allUser">
                                Accept Request
                            </p:commandLink>
                            <h:outputText value="FRIEND" rendered="#{userAvailable.friendStatus eq 1}"></h:outputText>
                        </p:column>
                    </p:dataTable>
                </h:form>
            </p:layoutUnit>
        </ui:define>
    </ui:composition>
</html>